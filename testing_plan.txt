# File Content Aggregator - Testing Plan

## Overview
This document outlines the testing strategy for the File Content Aggregator application, focusing on both existing functionality and new features that need testing. The plan is organized by feature area and test type.

## Core Search Functionality

### Unit Tests
- ✅ **Search Term Parsing** (Implemented in `tests/unit/search/searchTermParsing.test.ts`)
- ✅ **Search Term Evaluation** (Implemented in `tests/unit/search/searchTermEvaluation.test.ts`)
- ✅ **File Filtering** (Implemented in `tests/unit/search/fileFiltering.test.ts`)

### Integration Tests
- ✅ **Search Pipeline** (Implemented in `tests/integration/search/searchPipeline.test.ts`, documented in `docs/development/search-pipeline-tests.md`)
  - ✅ Test end-to-end search process with various query types
  - ✅ Test search cancellation
  - ✅ Test progress reporting
  - ✅ Test error handling during search

- ✅ **UI Integration** (Implemented in `tests/integration/ui/uiIntegration.test.ts`)
  - ✅ Test search results display
  - ✅ Test tree view expansion/collapse
  - ✅ Test file content preview loading
  - ✅ Test search term highlighting in previews

## Highlighting Functionality

### Unit Tests
- **HTML Highlighting**
  - ✅ Test highlighting of terms found via fuzzy search (Implemented in `tests/unit/ui/highlightHtmlUtils.fuzzy.test.ts`)
  - ✅ Test highlighting of terms found via NEAR operator (Implemented in `tests/unit/ui/highlightHtmlUtils.fuzzy.test.ts`)
  - ✅ Test highlighting with Unicode characters (Implemented in `tests/unit/ui/highlightHtmlUtils.fuzzy.test.ts`)

- **Plain Text Highlighting**
  - ✅ Test highlighting in plain text with fuzzy matches (Implemented in `tests/unit/ui/HighlightMatches.test.tsx`)
  - ✅ Test highlighting in plain text with NEAR operator matches (Implemented in `tests/unit/ui/HighlightMatches.test.tsx`)

### Integration Tests
- ✅ **Highlighting in Search Results** (Implemented in `tests/integration/search/highlighting.test.ts`)
  - ✅ Test highlighting with fuzzy matches in search results
  - ✅ Test highlighting with NEAR operator matches in search results
  - ✅ Documentation added in `docs/development/highlighting-tests.md`

## Fuzzy Search Functionality

### Unit Tests
- **Fuzzy Search Configuration**
  - ✅ Test fuzzy search threshold settings (Implemented in `tests/unit/search/fuzzySearchConfig.test.ts`)
  - ✅ Test minimum character length for fuzzy search (Implemented in `tests/unit/search/fuzzySearchConfig.test.ts`)
  - ✅ Test fuzzy search with case sensitivity (Implemented in `tests/unit/search/fuzzySearchConfig.test.ts`)
  - ✅ Test enabling/disabling fuzzy search in Content Query (Implemented in `tests/unit/search/fuzzySearchConfig.test.ts`)
  - ✅ Test enabling/disabling fuzzy search in Boolean Query mode (Implemented in `tests/unit/search/fuzzySearchConfig.test.ts`)
  - ✅ Test enabling/disabling fuzzy search in NEAR function (Implemented in `tests/unit/search/fuzzySearchConfig.test.ts`)

- **Fuzzy Search Matching**
  - ✅ Test fuzzy matching with slight misspellings (Implemented in `tests/unit/search/fuzzySearchMatching.test.ts`)
  - ✅ Test fuzzy matching with character transpositions (Implemented in `tests/unit/search/fuzzySearchMatching.test.ts`)
  - ✅ Test fuzzy matching with missing characters (Implemented in `tests/unit/search/fuzzySearchMatching.test.ts`)
  - ✅ Test fuzzy matching with extra characters (Implemented in `tests/unit/search/fuzzySearchMatching.test.ts`)
  - ✅ Test fuzzy matching with very short terms (should be disabled) (Implemented in `tests/unit/search/fuzzySearchMatching.test.ts`)
  - ✅ Test fuzzy matching with very long terms (Implemented in `tests/unit/search/fuzzySearchMatching.test.ts`)

### Integration Tests
- ✅ **Fuzzy Search in Search Pipeline** (Implemented in `tests/integration/search/fuzzySearch.test.ts`)
  - ✅ Test fuzzy search in Content Query mode
  - ✅ Test fuzzy search in Boolean Query mode
  - ✅ Test fuzzy search in NEAR operator
  - ✅ Test fuzzy search with multiple terms
  - ✅ Test performance with fuzzy search enabled vs disabled

## Regex Search Functionality

### Unit Tests
- ✅ **Regex Pattern Validation** (Implemented in `tests/unit/search/regexPatternValidation.test.ts`)
  - ✅ Test validation of valid regex patterns
  - ✅ Test validation of invalid regex patterns
  - ✅ Test handling of regex syntax errors
  - ✅ Test regex flags (case sensitivity, global, multiline)

- ✅ **Regex Pattern Matching** (Implemented in `tests/unit/search/regexPatternMatching.test.ts`)
  - ✅ Test basic pattern matching
  - ✅ Test character classes
  - ✅ Test quantifiers
  - ✅ Test capturing groups
  - ✅ Test lookahead/lookbehind assertions
  - ✅ Test boundary assertions

### Integration Tests
- ✅ **Regex in Search Pipeline**
  - ✅ Test regex in Content Query mode (Covered in `tests/integration/search/searchPipeline.test.ts`)
  - ✅ Test regex in Boolean Query expressions (Implemented in `tests/integration/search/regexSearch.test.ts`)
  - ✅ Test regex with NEAR operator (Implemented in `tests/integration/search/regexSearch.test.ts`)
  - ✅ Test performance with complex regex patterns (Implemented in `tests/integration/search/regexSearch.test.ts`)

## NEAR Operator Functionality

### Unit Tests
- **NEAR Operator Parsing**
  - ✅ Test parsing of NEAR syntax (Implemented in `tests/unit/search/searchTermParsing.test.ts`)
  - ✅ Test parsing of nested NEAR operators (Implemented in `tests/unit/search/searchTermParsing.test.ts`)
  - ✅ Test parsing of NEAR with quoted terms (Implemented in `tests/unit/search/searchTermParsing.test.ts`)
  - ✅ Test parsing of NEAR with regex patterns (Implemented in `tests/unit/search/searchTermParsing.test.ts`)
  - ✅ Test parsing with invalid NEAR syntax (Implemented in `tests/unit/search/searchTermParsing.test.ts`)

- **NEAR Operator Evaluation**
  - ✅ Test basic proximity matching (Implemented in `tests/unit/search/nearOperatorEvaluation.test.ts`)
  - ✅ Test different distance values (Implemented in `tests/unit/search/nearOperatorEvaluation.test.ts`)
  - ✅ Test with case sensitivity (Implemented in `tests/unit/search/nearOperatorEvaluation.test.ts`)
  - ✅ Test with fuzzy matching enabled/disabled (Implemented in `tests/unit/search/nearOperatorEvaluation.test.ts`)
  - ✅ Test with terms in different order (Implemented in `tests/unit/search/nearOperatorEvaluation.test.ts`)
  - ✅ Test with terms spanning multiple lines (Implemented in `tests/unit/search/nearOperatorEvaluation.test.ts`)

### Integration Tests
- **NEAR in Search Pipeline**
  - ✅ Test NEAR in Boolean Query expressions (Covered in `tests/integration/search/searchPipeline.test.ts`)
  - ✅ Test NEAR with mixed term types (exact, regex, fuzzy) (Implemented in `tests/integration/search/nearSearch.test.ts`)
  - ✅ Test performance with complex NEAR expressions (Implemented in `tests/integration/search/nearSearch.test.ts`)

## UI and Settings Tests

### Unit Tests
- ✅ **Settings Management** (Implemented in `tests/unit/settings/settingsManagement.test.ts`, documented in `docs/tests/settings-management-tests.md`)
  - ✅ Test saving/loading of fuzzy search settings
  - ✅ Test default settings values
  - ✅ Test settings validation

### Integration Tests
- ✅ **Settings UI** (Implemented in `tests/integration/ui/settingsUI.test.ts`, documented in `docs/tests/settings-ui-tests.md`)
  - ✅ Test enabling/disabling fuzzy search options in UI
  - ✅ Test settings persistence between sessions
  - ✅ Test settings effect on search behavior

## Performance Tests

### Unit Tests
- **Search Performance** (Implemented in `tests/unit/search/searchPerformance.test.ts`, documented in `docs/tests/performance-tests.md`)
  - ✅ Test search performance with many files
  - ✅ Test search performance with complex queries
  - ✅ Test memory usage during search operations

### Integration Tests
- **End-to-End Performance** (Implemented in `tests/integration/search/endToEndPerformance.test.ts`, documented in `docs/tests/performance-tests.md`)
  - ✅ Test application responsiveness during search
  - ✅ Test UI performance with large result sets

## Accessibility Tests

### Integration Tests
- **Keyboard Navigation**
  - **NEW:** Test keyboard navigation of search results
  - **NEW:** Test keyboard shortcuts for common actions

- **Screen Reader Compatibility**
  - **NEW:** Test screen reader announcements for search results
  - **NEW:** Test screen reader announcements for highlighted terms

## Localization Tests

### Integration Tests
- **Localized UI**
  - **NEW:** Test UI with different language settings
  - **NEW:** Test search with non-Latin characters
  - **NEW:** Test highlighting with non-Latin characters
